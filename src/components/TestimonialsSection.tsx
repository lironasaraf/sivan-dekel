import { useEffect, useState, useRef } from 'react';
import { Star, Quote } from 'lucide-react';

const TestimonialsSection = () => {
  const [isVisible, setIsVisible] = useState(false);
  const [expandedTestimonials, setExpandedTestimonials] = useState<{ [key: number]: boolean }>({});
  const sectionRef = useRef(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.disconnect();
        }
      },
      { threshold: 0.1 }
    );

    if (sectionRef.current) {
      observer.observe(sectionRef.current);
    }

    return () => {
      if (sectionRef.current) {
        observer.disconnect();
      }
    };
  }, []);

  const toggleExpanded = (index: number) => {
    setExpandedTestimonials(prev => ({
      ...prev,
      [index]: !prev[index]
    }));
  };

  const truncateText = (text: string, maxLength: number = 150) => {
    if (text.length <= maxLength) return text;
    return text.substring(0, maxLength) + "...";
  };

  const testimonials = [
    {
      name: "רוניוס כרמי",
      text: "אחרי שנים של עולם יווני סביבי ואוצר שירים מטורף שאני מנגן החלטתי ובחרתי במורה הטובה ביותר,והכי יצירתית שיש. אני מברך על כך את בעלת דרך,מחשבה,והמון סובלנות מחוייכת עלי והצליחי….",
      image: "/lovable-uploads/93ceab46-78b4-4fa4-987e-a22906a73781.png",
      rating: 5
    },
    {
      name: "דפנה גיל קרמר",
      text: "אני חיה ביוון וניסיתי ללמוד בכל דרך אפשרית.. אפליקציות, אינטרקציות, מורים/ות פרטיים ו..די!! בדיוק שהרמתי ידיים הכרתי אותך - Σας ευχαριστώ πολύ - בואי לבקר באי 💕",
      image: "/lovable-uploads/52ec5a78-074b-4665-ae51-fb6ab7f2a838.png",
      rating: 5
    },
    {
      name: "Nof Amir",
      text: "מורה מדהימה🌺 מקצועית, מלאת סבלנות ,מתאימה את עצמה לקצב ההתקדמות האישי שזה מאד חשוב ונותן הרגשת ביטחון 💪 תודה לך סיוון 🙏 ευχαριστώ πολύ",
      image: "/lovable-uploads/76ac0c5f-8282-4f9f-aa98-535320633c95.png",
      rating: 5
    },
    {
      name: "ערן קפלן",
      text: "גם אני עדיין לומד יוונית עם סיוון המדהימה שמעבירה את הקורס במקצועיות ועם השקעה יוצאת מגדר הרגיל כולל שיעורי תגבור וחזרה על החומר, סיוון שנותנת את כל כולה וזמינה לכל עיצה, הבהרה או בקשה. כל זאת אינו מובן מאליו ואני מנצל הזדמנות זו להודות לך מכל ליבי ולאחל לך חג חנוכה שמח",
      image: "/lovable-uploads/aaf772f5-9cef-40cf-a6e2-571930c1273d.png",
      rating: 5
    },
    {
      name: "Hila Vaish",
      text: "מורה מעולה! סיוון מלמדת בצורה סופר מקצועית, חוויתית ומעניינת. המלצה רותחת לכל מי שחושב ללמוד יוונית 👌🇬🇷",
      image: "/lovable-uploads/85ad5b54-cba6-43bc-a7e4-1f4989fc3c78.png",
      rating: 5
    },
    {
      name: "אבי פולסקי",
      text: "סיוון היא ה…..המורה ליוונית שיש, משקיעה בתלמידים ברמות על חלל סובלנית מאוד, הלימודים מלאים בשמחת חיים צחוקים תוך רכישת הידע ביוונית וההתקדמות מהירה ומדהימה הן מבחינת הידע הנרכש והן מבחינת היכולות שהתפתחו אצלי לשפה היוונית מדהים !!! כבר אחרי 6 שיעורים רוב התלמידים בקורס קוראים יוונית בסיסית, פשוט אין מורים כאלה בעולם סיוון יחודית ואין כמוה ואין לה תחליף אם אתה/את/אתם רוצים ללמוד יוונית סיוון דקל היא המורה שאתם רוצים ואם תזכו לה כמורתכם ליוונית זכיתם.",
      image: "/lovable-uploads/47ae979e-4b8a-4fee-b411-b44455a89a45.png",
      rating: 5
    },
    {
      name: "בני לובל",
      text: "מסיים בימים אלו את הקורס (יוונית למתחילים א'). סיון המקסימה הצליחה בנועם ובמקצועיות \"להחזיר אותי אל ספסל הלימודים\" עשרות שנים אחרי ש\"נשבעתי\" שזהו, לא לומד יותר בחיים באופן מוסדר, ובטח שלא נבחן ו/או מכין שוב שיעורי בית וכו' (למרות התארים האקדמיים 🤦). סיון היא הרבה יותר ממורה טובה: היא משקיענית, מקצוענית, נעימה ורגישה. אף שהקורס מוגדר כ-10 שיעורים, היא שם עבורנו הרבה מעבר לכך, עם מפגש שבועי נוסף באורך מלא שמוגדר כ\"חזרה\", עם התעקשות שלה לחלק את המחזור ל-2 קבוצות קטנות יותר לטובת יתר קשב ותשומת לב למשתתפים (ובכך להעמיס על עצמה כפל עבודה וזמן הוראה) – אף שבזום לכאורה אין בעיה ללמד קבוצה בכל גודל. את השיעורים סיון מעבירה בנועם רב כמעין שיחה זורמת ומענינת, מתובלת בסיפורים ושירים ביוונית, מתענינת בכל אחד מאיתנו בשיעור ולאחריו, מעודדת ומפרגנת. וזה - כשגם ב\"דרישות\" מאיתנו (שיעורי הבית...) סיון לא עושה הנחות, ויודעת בקיסמה להיות \"דורשנית\" ואסרטיבית מחד, ומאידך - בסופר נעימות והבטחה מתמשכת שלה אלינו שהדברים חשובים וכדאיים, וש\"תיכף הכל יתחבר לנו\". הקורס הוא הרבה הרבה מעבר לשיעורי שינון סתמיים (בשביל זה היינו יכולים ללמוד ב\"דואולינגו\"), כשלסיון חשוב כל כך שגם נבין, גם נלמד, וגם נהנה. מומלצת ביותר!!! 👑",
      image: "/lovable-uploads/8e65f743-cdc9-4905-8b22-6b0c73a2e940.png",
      rating: 5
    },
    {
      name: "סתיו עמק",
      text: "מקצועית ביותר, סבלנית ומשקיעה בכל שיעור. כזאת מורה לא תמצאו🥇",
      image: "/lovable-uploads/830fbc63-4809-4f4d-b49e-7d58ae9745bb.png"
    },
    {
      name: "אלינור פרוימוביץ'",
      text: "מעבר למורה סבלנית, מקצועית, מסורה ובאמת מחוברת לשפה היוונית…תמצאו אישה חמה, נעימה, אותנטית ועם רצון גדול שתצליחו! מי שמחליט להירשם פשוט זוכה👑",
      image: "/lovable-uploads/4195eb97-c012-4d38-a6d7-8701b89c1a97.png"
    },
    {
      name: "אביב אורנשטיין",
      text: "מורה מעולה ! מעבירה את החומר בצורה ברורה ועושה חזרות על החומר גם מעבר לשיעורים בקורס. בקיצור מומלצת מאוד.",
      image: "/placeholder.svg",
      rating: 5
    },
    {
      name: "שאול פלד",
      text: "סיוון מורה מעולה! האהבה שלה ליוונית (וליוון) נוכחת בכל שיעור ומעשירה אותו. למתחילים זו כניסה נהדרת לשפה, למתקדמים יותר קפיצת מדרגה מובטחת. מומלצת בחום.",
      image: "/lovable-uploads/7a94da55-2439-4941-8a61-5b68f230c84e.png",
      rating: 5
    },
    {
      name: "יהלי זהבי",
      text: "אין עליך מורה בחסד!!! השעה הכי טובה בשבוע שלי. אני כל כך נהנת מכל רגע בשיעורים ומהתמיכה והנכונות לעזור גם מעבר לשעות הלימוד. ❤️❤️❤️❤️❤️❤️❤️❤️",
      image: "/placeholder.svg",
      rating: 5
    },
    {
      name: "Shoshi Aizenberg Zimmerman",
      text: "ממליצה מאד על סיוון. שיטת הלימוד מובנת ויסודית. סיוון סובלנית , זמינה וקשובה לכל שאלה ובקשה.❣️",
      image: "/lovable-uploads/3e39d528-9df8-4751-a347-92f8c64a71e1.png",
      rating: 5
    },
    {
      name: "Sara Botnaro",
      text: "מורה נפלאה ,סבלנית,קשובה לתלמיד,רהוטה בהסבריה ותורמת הרבה מזמנה וממרצה ללימוד השפה היוונית.ממליצה בחום.",
      image: "/lovable-uploads/827b3968-8208-4596-a732-5dc3c190aaa1.png",
      rating: 5
    },
    {
      name: "Liron Varon",
      text: "מורה מספר 1! אני סוף סוף מאזין לשירים ומבין מה הם אומרים. זה משמח אותי ממש. כבר לא יכול לחכות לקורס מתקדם. תודה סיון. שמח מאוד שהייתי תלמיד שלך.",
      image: "/lovable-uploads/811aeda8-6432-4998-964f-713808090333.png",
      rating: 5
    },
    {
      name: "Carmela Kirmaeir",
      text: "סיוון הינה מורה ליוונית בכל רמח אבריה, מקסימה עם הרבה סבלנות לנתינה מדהימה, בזכותה יש סיכוי שאלמד יוונית, תודה לך סיוון, אהובת אותך❤️",
      image: "/lovable-uploads/7cd94760-965d-42be-a85c-862a3da1692f.png",
      rating: 5
    },
    {
      name: "Alice Shasha",
      text: "מורה מספר 1 !!!! סופר מקצועית וסבלנית ממליצה בחום❤️❤️",
      image: "/lovable-uploads/f1a87727-a635-4d2a-8b6f-c2adf771f53c.png",
      rating: 5
    },
    {
      name: "Eydor Diamant",
      text: "סיוון מורה מעולה, סבלנית ותמיד עם חיוך. מאד מקפידה על בניית השפה מהיסודות כדי לא ללכת לאיבוד בהמשך. מאד ממליץ לכל מי שחושב ללמוד יוונית",
      image: "",
      rating: 5
    },
    {
      name: "חמוטל קרוגליק",
      text: "מורה מעולה. שיעורים מקצועיים ומסודרים. סבלנית, מתיחסת לכל בעיה וקושי, משקיעה מזמנה בשיעורי חזרה. תודה רבה ⚘",
      image: "/placeholder.svg",
      rating: 5
    },
    {
      name: "חנה פאעל",
      text: "סיון תודה ענקית על קורס א׳! בדרך הכל כך מיוחדת שלך, ההשקעה והאכפתיות האין סופית הצלחת ובגדול להביא אותי לקרוא ולהבין טקסטים ביוונית כבר אחרי 10 שיעורים!! גרמת לי להרגיש בטוחה להזמין אוכל ומשקאות בטברנה ובכלל בהתנהלות היומיומית ביוון. ממתינה לקורס ב׳",
      image: "/placeholder.svg",
      rating: 5
    },
    {
      name: "סיון זמיר",
      text: "מורה מעולה וסבלנית שיודעת להתאים עצמה למגבלות ואו לאילוצים של התלמיד. ממליץ מאד!",
      image: "/lovable-uploads/65143ebe-17fd-4bc2-8635-28208607ed43.png",
      rating: 5
    },
    {
      name: "אורית אלדר",
      text: "סיון מדהימה! מורה מעולה. השיעורים מושקעים, בנויים היטב, מאתגרים באופן שמעודד למידה ולא פחות מזה, כייפים. בנוסף לשיעורים, סיון עושה שיעורי תגבור שמסייעים להבנת החומר ולהטמעתו. ועוד לא הזכרתי את החומרים הכתובים והמצולמים שהיא שולחת בנדיבות רבה. בקיצור, ממליצה בחום. סיון את אחת ויחידה, אלופה❣️",
      image: "/lovable-uploads/d87f8ca4-8585-494c-98fd-806f14fc119c.png",
      rating: 5
    },
    {
      name: "דליה לב",
      text: "המורה ליוונית הכי טובה שיש באתם אליה מגמגמים ? יצאתם עם אפשרות תקשור ביוונית 🔥🔥🔥❤️❤️❤️❤️",
      image: "/lovable-uploads/93d9f001-83d5-433a-a167-b47184e83846.png",
      rating: 5
    },
    {
      name: "מזל צדיק ברקו",
      text: "Η δασκάλα μου είναι καλή המורה שלי טובה. איך למדתי לכתוב ולקרוא ב10 שיעורים?? סיוון דקל!!! נתראה בקורס למתקדמים. Ευχαριστώ πολύ!",
      image: "/lovable-uploads/93bf2810-a913-4676-a145-0acbcf0960a7.png",
      rating: 5
    },
    {
      name: "Raquel Benasayag Pivan",
      text: "מאוד ממליצה על סיוון מנסיון אישי. כמה סבלנות, רצינות ורצון שכל אחד ידבר יוונית תוך זמן קצר. מעבר לשיעורים עצמם, סיוון דואגת שיעמוד לרשות התלמיד המון חומר עזר, ומקיימת שיעורי הכנה לשיעורים השבועיים. בנוסף לכל אלה היא סימפטית ומלמדת ברוגע ובחן, כך שאם החלטת ללמוד יוונית, זו המורה שלך 🙏",
      image: "/lovable-uploads/d6d48503-d4f6-4406-bbe3-cbdee850b929.png",
      rating: 5
    },
    {
      name: "קסם שער",
      text: "מומלצת ביותר ! מקצועית סבלנית תמיד פנויה לעזור למי שלא מבין או למי שפספס תשיעור ממש לא מובן מאליו האכפתיות שלה גם בשעות לא שעות תמיד נותנת את עצמה , אני ממליצה עליה לכל מי שרוצה ללמוד את השפה בצורה הטובה ביותר סיוון את פשוט תותחית תודה על הכל . 🇬🇷🙏🏽❤️",
      image: "/lovable-uploads/62941192-d608-4b59-8108-0be3918b5303.png",
      rating: 5
    },
    {
      name: "Maor Tal-maon",
      text: "בדיוק סיימתי את הקורס למתחילים ואני יכולה להגיד שסיוון היא מורה מעולה! למדנו המון ובצורה מעניינת וחוויתית. סיוון משלבת מגוון דרכי למידה- שיעורים בזום, סרטונים, אפליקציה ללמוד מילים ועוד. מומלץ ביותר!",
      image: "/lovable-uploads/23c9013b-ada8-407b-baf8-c1b28cc4c059.png",
      rating: 5
    },
    {
      name: "Ron Shatz",
      text: "סיוון מורה מעולה. אנחנו לומדים אצלה מספר חודשים: התקדמנו מאוד והלימוד הינו מעמיק ומהנה. סיון משקיעה המון עבודה בהכנת חומרים המתאימים לרמת הקבוצה וכן בהכנת עזרים מהנים. בקיצור, כיף ללמוד יווניות עם סיוון.",
      image: "/lovable-uploads/99a3433b-550e-40fb-94bf-002f92029eaf.png",
      rating: 5
    },
    {
      name: "Shugon Cohen",
      text: "בתור דוברי עברית, יש יתרון גדול שהמורה שלך גם דוברת עברית, סיוון מנגישה את השפה היוונית בצורה כיפית ,לא מוותרת על הדקדוק, ותמיד תמצא את הדרך שלך קל ללמוד ממנה את השפה(דיאלוגים טקסטים, שירים ,או טריוויה). מומלצת ביותר",
      image: "/lovable-uploads/001727fd-9c75-4599-8792-2233ee19e2fd.png",
      rating: 5
    },
    {
      name: "Arik Fartuk",
      text: "סיון יקרה איזה כייף שפגשתי אותך , זכיתי בגדול, התחלתי ללמוד יוונית אצלך לפני שלושה חודשים, למדתי המון המון מילים ומשפטים, למדנו דקדוק היכן שצריך, ידעת לנווט אותי על פי ההתקדמות, עשינו חזרות והכל תוך הנאה , צחוקים, ודבקות במטרה. תודה שאת זמינה לשאלות , תודה על שיעורי הבית החשובים שאת דואגת לתת לי . תודה שבזכותך הנסיעה ליוון תהיה מהנה יותר 😘😘😘",
      image: "/lovable-uploads/b780b7bd-8581-4f5c-8b8c-0cdcfa017187.png",
      rating: 5
    },
    {
      name: "Merav Cohen Kolker",
      text: "אליפות! המורה הכי טובה שיש! סבלנית ויסודית, מלמדת במקצועיות, יודעת לענות על כל שאלה ותהיה יודעת לפרגן ולחזק את הביטחון! אני נהנית מכל רגע🥰",
      image: "/placeholder.svg",
      rating: 5
    },
    {
      name: "Nurit Karp",
      text: "סיוון מורה מעולה היא פשוט מלמדת מהלב הרחב שלה וזאת הסיבה שכל כך הרבה תלמידים מתחברים ואוהבים אותה.... כל מילה שנכתבה עליה - בול!!!! תודה סיוון על הסבלנות העידוד וההשקעה כיף גדול ללמוד איתך",
      image: "/lovable-uploads/288ea120-1351-492a-a294-fbc5a3525569.png",
      rating: 5
    },
    {
      name: "איתן סובל",
      text: "מורה מעולה,כיפית,מעבירה את השיעורים באופן מיוחד וחווייתי,בעלת ידע נרחב.מיצרת חומרי עזר מושקעים,מסודרים,אסטטיים וכאלו שעושים סדר ומקלים על הלמידה.היענות מלאה לבקשות ושאלות.תמורה מלאה ומהנה.ממליץ בחום רב.",
      image: "/lovable-uploads/d561860a-4142-4502-a5a0-de2b6579208c.png",
      rating: 5
    },
    {
      name: "Shirley Magiday",
      text: "הבן שלי (13) ואני לומדים עם סיוון כבר חודשיים, נהדרת, משקיעה, נותנת שיעורי בית😅 ממש חווית לימודים נעימה",
      image: "/lovable-uploads/690f3d16-7748-4721-a1dd-4db2ae020a92.png",
      rating: 5
    },
    {
      name: "רוני שפירא",
      text: "סיון היקרה האהבה העמוקה לשפה ולתרבות היוונית מורגשים בכל קקה מהשיעורים שלך. כמה שאהבתי את יוון לפני, היום בזכותך, אפילו יותר. מורה סבלנית, נעימה ואכפתית. רוצה בהצלחה של כל תלמיד. מורה נהדרת ❤️",
      image: "/lovable-uploads/690f3d16-7748-4721-a1dd-4db2ae020a92.png",
      rating: 5
    },
    {
      name: "אלפרד",
      text: "סיוון היקרה רציתי להגיד תודה ענקית לך ולבעלך היקר על כל החום, הלב הרחב, והאירוח המדהים היום. בזכותך אני מצליח לקרוא ולדבר יוונית – משהו שחלמתי עליו, ואת הפכת אותו למציאות. את מורה נהדרת, סבלנית, חכמה ומלאת שמחה. אני מרגיש ממש בר מזל שהכרתי אתכם. וגם לכם תלמידות ,תלמידים וחברים יקרים הפכתם את הלימוד לחוויה היה לי מוי כיף לראות אותכם פיזית להרגיש אותכם ומקווה שנישאר בקשר. באהבה אלפרדו",
      image: "/lovable-uploads/04cd009a-4fcb-44e0-ba85-38058f2cc022.png",
      rating: 5
    },
    {
      name: "דיתי",
      text: "Αγαπητέ Σιβάν, φίλε μου מצטרפת לכל מה שנאמר ונכתב. אכן ערב מיוחד וקסום. היה לי כייף ומרתק לפגוש ולהכיר את האנשים שמאחורי הפנים בזום. את עצמך מורה מדהימה, ייחודית, יסודית, משקיענית עד בלי די, סבלנית ומכילה ומלאת מוטיבציה. אין ספק שבזכותך ובזכות שיטות הלימוד שלך הגענו לאן שהגענו... התוצאות מדברות בעד עצמן. לך ולחיים מגיעה תודה גדולה על ההשקעה, הטרחה, האוכל הטעים והארוח בביתכם ברוחב לב ומכל הלב. מבחינתי מה שהיה אתמול בערב היה מעבר למסיבת סיום, נוצרו חיבורים חבריים בין האנשים וניכר כי כולם ישמחו ויתרגשו להיפגש שוב, בין אם בקורס ההמשך ובין אם בהזדמנות אחרת (למשל אצל אלפרד על היאכטה 😃). ευχαριστώ πολύ באהבה ממני, דיתי",
      image: "/lovable-uploads/a99bed83-6357-47fb-91d0-a4f8069aaa65.png",
      rating: 5
    },
    {
      name: "דגית",
      text: "תודה רבה סיון על ערב מקסים, מושקע וטעים! היה כיף לפגוש מחוץ לזום את מי שהגיע ואני כבר מחכה להמשך 🥰",
      image: "/lovable-uploads/79573b4c-f371-458e-b1d8-a7ca96882355.png",
      rating: 5
    },
    {
      name: "חנה",
      text: "סיון וחיים תודה רבה על האירוח המושלם והמושקע ועל החיבור עם אנשים נפלאים. סיון, את עוזרת בנועם, בחום ובאהבה להגשים את החלום שלי צובטת את עצמי, עשרה שיעורים ואני כבר קוראת טקסט ביוונית 💃🏻 מחכה לקורס הבא ❤ Ευχαριστώ πολύ κορίτσι μου",
      image: "/placeholder.svg",
      rating: 5
    },
    {
      name: "Shyly Castro Bajayo",
      text: "סיוון היקרה, היה עונג ללמוד איתך, הנגשת לנו את השפה היוונית בצורה ברורה, עם הרבה סבלנות תודה❤️",
      image: "/lovable-uploads/072e4c08-f88f-4cd2-8b3a-6ecac3b792f7.png",
      rating: 5
    },
    {
      name: "לירון אורלב",
      text: "מצטרפת לכל מילה ומוסיפה… שנתיים וחצי שאני גרה ביוון, עובדת עם יוונים וגם מנסה ללמוד את השפה. הייתי בשיעורים קבוצתיים עם מורה יוונית ואחר כך עם שני מורים יווניים באופן פרטני. התסכול והייאוש מהשפה היוונית היו גדולים כל כך עד שכבר רציתי לוותר. עד ששמעתי מחברה על סיון והקורסים שלה. כבר בשיעור הראשון התמוססו להן התחושות הקשות ואל הלב חלחלה תקווה זעירה… בשיעור השני כבר הרגשתי ״בבית״ ואחרי השיעור החמישי כבר מצאתי את עצמי מדברת עם יוונים בסופר ובעבודה(: השיעורים איתך היו משב רוח נהדר של איכות, של שיקום ביטחון עצמי הרוס, של הנאה צרופה וחדוות למידה. תודה על הקורס המוקפד, על הרגישות לכל פרט, על החיוך וההקשבה. ניפגש בקורס ההמשך בקרוב❤️",
      image: "/lovable-uploads/504681b1-07b3-40d9-9749-43652d3121ec.png",
      rating: 5
    },
    {
      name: "בתיה גוטליב",
      text: "היי לכולם רציתי לספר לכם על המורה שלי ליוונית. כבר זמן רב אני מנסה ללמוד את השפה העתיקה והמסובכת הזו ולא נרשמו הצלחות. ניסיתי בבית חב״ד אבל שם זה נוקשה מאד ובקבוצה גדולה. מצאתי מורה ליוונית באי שלנו שהייתה סבלנית ונחמדה אבל לימדה אותי ״שלום כיתה א׳ ״ והשעורים היו מספרים של ילדים שהזכיר לי את ״דנה קמה דנה נמה״ וכמובן לימוד יבש לגמרי של כל ( נו טוב לא כל כי יש מיליון) הכללים התחביריים וגם לא ידעה להשתמש בזום אז בכל פעם שחזרתי ארצה הכל נמחק כלא היה. ואז מצאתי את ״ה״ מורה בהא הידיעה. מצאתי אשה מקסימה, נעימה ועדינה ( שלא לדבר על יפה) שאוהבת את מה שהיא עושה ואת התרבות היוונית. מורה סבלנית לחטייארית כמוני שתמיד עונה ומסבירה גם מחוץ לשעור. שמתאימה את צורת הלימוד לצורת החשיבה האסוציאטיבית שלי. ידעתם שגניקולוג זו מילה שנגזרת מהמילה גניקה= אשה? ( ברור שידעתם). בקיצור אם חפצה נפשכם במורה נהדרת, סיוון היא הכתובת. וכנראה שהיא תצטרך לסבול אותי עוד זמן רב… Ευχαριστώ πολύ η δασκάλα μου",
      image: "/lovable-uploads/520c2a21-cdc0-47cb-adad-f28a4ac56c8c.png",
      rating: 5
    }
  ];

  const renderStars = () => (
    <div className="flex justify-center gap-1 mb-2">
      {[...Array(5)].map((_, i) => (
        <Star key={i} className="h-5 w-5 fill-greek-gold text-greek-gold" />
      ))}
    </div>
  );

  return (
    <section
      id="testimonials"
      ref={sectionRef}
      className="py-16 md:py-24 bg-gradient-to-br from-greek-turquoise/5 to-white"
    >
      <div className="container mx-auto px-4 md:px-6">
        <div className="text-center mb-12">
          <h2 className={`section-heading ${isVisible ? 'animate-fade-in' : 'opacity-0'}`}>
            המלצות וחוות דעת
          </h2>
          <p className="text-lg text-gray-700 mt-4 max-w-2xl mx-auto">
            מה התלמידים שלי אומרים על חוויית הלימוד ({testimonials.length} המלצות)
          </p>
        </div>

        <div className={`${isVisible ? 'animate-fade-in' : 'opacity-0'} overflow-x-auto`}>
          <div className="flex gap-4 pr-2">
            {testimonials.map((testimonial, index) => {
              const isLong = testimonial.text.length > 150;
              const isExpanded = expandedTestimonials[index];
              const displayText = isLong && !isExpanded
                ? truncateText(testimonial.text)
                : testimonial.text;

              return (
                <div
                  key={index}
                  className="min-w-[300px] max-w-[300px] shrink-0 bg-white shadow-lg rounded-lg p-6 flex flex-col"
                >
                  <div className="text-center flex-grow">
                    <div className="relative w-16 h-16 mx-auto mb-3">
                      <img
                        src={testimonial.image}
                        alt={testimonial.name}
                        className="w-full h-full rounded-full object-cover shadow-md"
                        onError={(e) => (e.currentTarget.src = "/placeholder.svg")}
                      />
                      <div className="absolute -top-1 -right-1 w-6 h-6 bg-greek-turquoise rounded-full flex items-center justify-center">
                        <Quote className="h-3 w-3 text-white" />
                      </div>
                    </div>
                    <h3 className="font-semibold text-greek-blue mb-1">{testimonial.name}</h3>
                    {renderStars()}
                    <div className="text-gray-700 text-sm leading-relaxed mt-2">
                      <p>"{displayText}"</p>
                      {isLong && (
                        <button
                          onClick={() => toggleExpanded(index)}
                          className="text-greek-turquoise hover:text-greek-blue text-xs mt-2 underline"
                        >
                          {isExpanded ? "פחות" : "עוד..."}
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      </div>
    </section>
  );
};

export default TestimonialsSection;
